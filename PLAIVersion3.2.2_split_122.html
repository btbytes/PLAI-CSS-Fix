<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Unknown</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link rel="stylesheet" type="text/css" href="stylesheet.css"/>
<link rel="stylesheet" type="text/css" href="page_styles.css"/>
</head>
  <body class="c">
<h2 class="c27" id="h.b9fuu6pixv2g"><span class="c4">Static Type Safety</span></h2><p class="c3"><span class="c4"></span></p><p class="c5"><span class="calibre3">We should be troubled by the types of these accessors. They seem to indiscriminately try to pull out field values, </span><span class="c7">whether the variant has them or not</span><span class="c4">. For instance, we can write and type-check this program, which is appealing:</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c41">(size-correct : (BT -&gt; Number))</span></p><p class="c3"><span class="c41"></span></p><p class="c5"><span class="c41">(define (size-correct (t : BT))</span></p><p class="c5"><span class="c41">  (if (mt? t)</span></p><p class="c5"><span class="c41">      0</span></p><p class="c5"><span class="c41">      (+ 1 (+ (size-correct (node-l t)) (size-correct (node-r t))))))</span></p><p class="c3"><span class="c41"></span></p><p class="c5"><span class="c41">(test (size-correct (mt)) 0)</span></p><p class="c3"><span class="c41"></span></p><p class="c5"><span class="calibre3">However, we can just as well type-check </span><span class="c7">this</span><span class="c4"> program:</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c41">(define (size-wrong (t : BT))</span></p><p class="c5"><span class="c41">  (+ 1 (+ (size-wrong (node-l t)) (size-wrong (node-r t)))))</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="calibre3">This should not type-check because it has a clear type-error. The type of </span><span class="c28">size-wrong</span><span class="c4"> is</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c41">(size-wrong : (BT -&gt; Number))</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">so it is perfectly type-correct to write:</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c41">(size-wrong (mt))</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">But running this, of course, results in a run-time error, the very kind of error we might have hoped the type-checker would catch.</span></p></body></html>
