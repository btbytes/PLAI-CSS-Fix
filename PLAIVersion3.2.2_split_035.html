<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Unknown</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link rel="stylesheet" type="text/css" href="stylesheet.css"/>
<link rel="stylesheet" type="text/css" href="page_styles.css"/>
</head>
  <body class="c">
<h2 class="c27" id="h.5dek1zu8vi2n"><span class="calibre3">The Value </span><span class="calibre3">Datatype</span></h2><p class="c3"><span class="c4"></span></p><p class="c5"><span class="calibre3">Therefore, we first need to define a datatype that reflects the different kinds of values that an evaluator can produce. We will follow a convention and call the return type constructors </span><span class="c28">…V</span><span class="calibre3"> to distinguish from the inputs. Dually, we’ll call the inputs </span><span class="c28">…E</span><span class="c4"> (for expressions) to distinguish from the outputs.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">First we’ll rename our expressions:</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c41">(define-type Exp</span></p><p class="c5"><span class="c41">  [numE (n : Number)]</span></p><p class="c5"><span class="c41">  [boolE (b : Boolean)]</span></p><p class="c5"><span class="c41">  [plusE (left : Exp) (right : Exp)]</span></p><p class="c5"><span class="c41">  [cndE (test : Exp) (then : Exp) (else : Exp)])</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="calibre3">(nothing has changed other than the </span><span class="c7">names</span><span class="c4"> of the constructors).</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="calibre3">Now we introduce a </span><span class="c28">Value</span><span class="c4"> datatype to represent the types of answers our evaluator can produce:</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c41">(define-type Value</span></p><p class="c5"><span class="c41">  [numV (the-number : Number)]</span></p><p class="c5"><span class="c41">  [boolV (the-boolean : Boolean)])</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">We update the type of our evaluator:</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c41">(calc : (Exp -&gt; Value))</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">and the early parts are easy:</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c41">(define (calc e)</span></p><p class="c5"><span class="c41">  (type-case Exp e</span></p><p class="c5"><span class="c41">    [(numE n) (numV n)]</span></p><p class="c5"><span class="c41">    [(boolE b) (boolV b)]</span></p><p class="c5"><span class="c28">    …))</span></p></body></html>
