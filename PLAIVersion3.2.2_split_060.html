<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Unknown</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link rel="stylesheet" type="text/css" href="stylesheet.css"/>
<link rel="stylesheet" type="text/css" href="page_styles.css"/>
</head>
  <body class="c">
<h2 class="c27" id="h.vntesywk0bpk"><span class="c4">Multi-Armed Conditionals</span></h2><p class="c3"><span class="c4"></span></p><p class="c5"><span class="calibre3">Here’s one last example that clarifies what … means: it means “zero or more instances of the preceding pattern”. Using it, we can define our own multi-armed conditional. Suppose we want to define a function called </span><span class="c28">sign</span><span class="c4"> that produces a string based on the sign of a number:</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c41">(define (sign n)</span></p><p class="c5"><span class="c41">  (my-cond</span></p><p class="c5"><span class="c41">   [(&lt; n 0) "negative"]</span></p><p class="c5"><span class="c41">   [(= n 0) "zero"]</span></p><p class="c5"><span class="c41">   [(&gt; n 0) "positive"]))</span></p><p class="c3"><span class="c41"></span></p><p class="c5"><span class="calibre3">Again, it’s clear that </span><span class="c28">my-cond</span><span class="c4"> can’t be a function; we need to extend the language with a new construct, using a macro.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">How many arms should our multi-armed conditional have? As many as the programmer wants, of course. We’ll further stipulate that if we have exhausted all the questions and none has yielded a true value, the “falling through” produces an error.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="calibre3">Thus, we want to peel off the first question-answer pair and evaluate the question. If it succeeds, we evaluate the answer. Otherwise, we want to recur on the remaining questions…which is essentially a smaller instance of </span><span class="c28">my-cond</span><span class="calibre3">. (That’s right, we’re recurring on </span><span class="c7">syntax</span><span class="c4"> now!)</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="calibre3">Since </span><span class="c28">…</span><span class="calibre3"> means “zero or more”, we end up with a pattern where we repeat a pattern: the first copy peels off the first instance, while the second, followed by a </span><span class="c28">…</span><span class="c4">, captures all the remaining instances:</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c41">(define-syntax my-cond</span></p><p class="c5"><span class="c41">  (syntax-rules ()</span></p><p class="c5"><span class="c41">    [(my-cond) (error 'my-cond "should not get here")]</span></p><p class="c5"><span class="c41">    [(my-cond [q0 a0] [q1 a1] ...)</span></p><p class="c5"><span class="c41">     (if q0</span></p><p class="c5"><span class="c41">         a0</span></p><p class="c5"><span class="c41">         (my-cond [q1 a1] ...))]))</span></p><p class="c3"><span class="c41"></span></p><p class="c31"><span class="c40">Exercise:</span><span class="calibre3"> Examine this code in detail. Try out the example above. It’s </span><span class="c7">essential</span><span class="c4"> that you run this through the Macro Stepper: you’ll learn a lot about macros from this example!</span></p><p class="c3"><span class="c4"></span></p><p class="c3"><span class="c4"></span></p><p class="c3"><span class="c4"></span></p></body></html>
