<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Unknown</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link rel="stylesheet" type="text/css" href="stylesheet.css"/>
<link rel="stylesheet" type="text/css" href="page_styles.css"/>
</head>
  <body class="c">
<h2 class="c27" id="h.ub5u67gewjxx"><span class="c4">Extending the Calculator</span></h2><p class="c3"><span class="c4"></span></p><p class="c5"><span class="calibre3">Clearly, adding conditionals doesn’t change what our calculator previously did, we can leave that intact, and just focus on the handling of </span><span class="c28">if</span><span class="c4">:</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c41">(define (calc e)</span></p><p class="c5"><span class="c41">  (type-case Exp e</span></p><p class="c5"><span class="c41">    [(num n) n]</span></p><p class="c5"><span class="c41">    [(plus l r) (+ (calc l) (calc r))]</span></p><p class="c5"><span class="c41">    [(cnd c t e) …]))</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">Indeed, we can recursively evaluate each term, in case it’s useful:</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c41">(define (calc e)</span></p><p class="c5"><span class="c41">  (type-case Exp e</span></p><p class="c5"><span class="c41">    [(num n) n]</span></p><p class="c5"><span class="c41">    [(plus l r) (+ (calc l) (calc r))]</span></p><p class="c5"><span class="c41">    [(cnd c t e) … (calc c) … (calc t) … (calc e) …]))</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">Let’s take these one at a time.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="calibre3">But now we run into a problem. What is the result of calling </span><span class="c28">(calc c)</span><span class="calibre3">? We expect it to be some kind of Boolean value. But we don’t </span><span class="c7">have</span><span class="c4"> Boolean values in the language!</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="calibre3">That’s not all. Above, we have written both </span><span class="c28">(calc t)</span><span class="calibre3"> and </span><span class="c28">(calc e)</span><span class="calibre3">. However, the whole point of a conditional is that we </span><span class="c7">don’t</span><span class="c4"> want to evaluate both, only one. So we have to pick which one to evaluate based on some criterion.</span></p></body></html>
