<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Unknown</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link rel="stylesheet" type="text/css" href="stylesheet.css"/>
<link rel="stylesheet" type="text/css" href="page_styles.css"/>
</head>
  <body class="c">
<h2 class="c27" id="h.eppk5x66e87a"><span class="c4">Returning to the Counters</span></h2><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">Now let’s return to the two counters, armed with the ideas from the interactions above.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">Run the stateful counter program and submit, say, 3 times. After that, the page will list the count as 3, and the URL will look something like</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">http://localhost:51264/servlets/standalone.rkt;((%22k%22%20.%20%22(1%203%2097639995)%22))?</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="calibre3">Now copy this URL, create a </span><span class="c7">new</span><span class="calibre3"> tab, paste it, and enter. This runs the computation associated with this URL. Perhaps surprisingly, this shows the count as 4. Now go back to the previous tab and submit the form. That tab now shows a count not of 4 but of 5. Return to the second tab and submit; it now shows 6. The stacks help us see why: every return mutates the </span><span class="c7">same</span><span class="calibre3"> </span><span class="c28">counter</span><span class="c4"> variable.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">Now repeat the same process with the functional counter. After 3 submissions, we get a URL like</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="c4">http://localhost:51379/servlets/standalone.rkt;((%22k%22%20.%20%22(1%203%2028533532)%22))?</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="calibre3">which seems very similar. Now copy </span><span class="c7">this</span><span class="c4"> URL into a new tab, and repeat the interactions above.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="calibre3">What we see is very different. Each tab has its own local “memory”, much as we expected of the pages on the travel Web site. The continuation does not mutate a single shared variable, but rather makes a new </span><span class="c7">call</span><span class="c4"> to loop, which creates a new binding that is distinct from previous bindings. Each time we submit we make another call, which makes another stack frame and its corresponding environment frame, which are distinct.</span></p><p class="c3"><span class="c4"></span></p><p class="c5"><span class="calibre3">This distinction between creating a single, shared, mutable variable and creating distinct variables that each have their own immutable value should be familiar: it’s the exact same problem that we saw in the Loops assignment [</span><span class="c16"><a class="c11" href="https://www.google.com/url?q=https://cs.brown.edu/courses/cs173/2022/loops.html&amp;sa=D&amp;source=editors&amp;ust=1695232021622985&amp;usg=AOvVaw0xjaprMcAAUZTQQEvCfWVs">https://cs.brown.edu/courses/cs173/2022/loops.html</a></span><span class="c4">].</span></p></body></html>
